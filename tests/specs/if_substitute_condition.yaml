---
# Template
commands:
- test
- !*If
  # Do we really need a substitution syntax there?
  # Maybe next is fine too:
  # condition: values.with-run
  condition: ${{values.with-run}}
  then: [run]

tests:
  all:
  - !*If
    # TODO: Support for expressions: ${values.tests-type == integ}
    condition: ${{values.is-integ-tests}}
    then:
    - integ1
    - integ2
    else:
    - unit1
    - unit2

---
values:
  with-run: true
  is-integ-tests: false
result:
  ok:
    commands:
    - test
    -
      - run
    tests:
      all:
      -
        - unit1
        - unit2

---
values:
  with-run: false
  is-integ-tests: true
result:
  ok:
    commands:
    - test
    -
    tests:
      all:
      -
        - integ1
        - integ2
